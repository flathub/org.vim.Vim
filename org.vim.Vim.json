{
  "app-id": "org.vim.Vim",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "18.08",
  "sdk": "org.freedesktop.Sdk",
  "command": "vim",
  "cleanup": [
    "/include",
    "/lib/debug",
    "/lib/*.a",
    "/lib/*.la",
    "/lib/pkgconfig",
    "/share/man"
  ],
  "finish-args": [
    "--filesystem=host",
    "--filesystem=/tmp",
    "--filesystem=/var/tmp",
    "--share=ipc",
    "--share=network",
    "--socket=x11",
    "--socket=wayland"
  ],
  "modules": [
    "shared-modules/lua5.3/lua-5.3.2.json",
    {
      "name": "vim",
      "build-options": {
        "env": {
          "LIBS": "-lm"
        }
      },
      "config-opts": [
        "--enable-gui=gtk3",
        "--enable-gtk3-check",
        "--enable-luainterp",
        "--enable-multibyte",
        "--enable-python3interp=dynamic",
        "--enable-xim",
        "--enable-xsmp",
        "--enable-xsmp-interact",
        "--disable-desktop-database-update",
        "--disable-icon-cache-update",
        "--disable-gnome-check",
        "--disable-motif-check",
        "--disable-athena-check",
        "--disable-fontset",
        "--with-lua-prefix=/app",
        "--with-x"
      ],
      "post-install": [
        "install -D -m644 org.vim.Vim.appdata.xml /app/share/appdata/org.vim.Vim.appdata.xml",
        "install -D -m644 runtime/vim.desktop /app/share/applications/org.vim.Vim.desktop",
        "install -D -m644 runtime/gvim.desktop /app/share/applications/org.vim.Vim.GVim.desktop",
        "install -D -m644 runtime/vim16x16.png /app/share/icons/hicolor/16x16/apps/org.vim.Vim.png",
        "install -D -m644 runtime/vim32x32.png /app/share/icons/hicolor/32x32/apps/org.vim.Vim.png",
        "install -D -m644 runtime/vim48x48.png /app/share/icons/hicolor/48x48/apps/org.vim.Vim.png",
        "install -D -m644 vim64x64.png /app/share/icons/hicolor/64x64/apps/org.vim.Vim.png",
        "install -D -m644 vim128x128.png /app/share/icons/hicolor/128x128/apps/org.vim.Vim.png",
        "desktop-file-edit --set-icon='org.vim.Vim' /app/share/applications/org.vim.Vim.desktop",
        "desktop-file-edit --set-icon='org.vim.Vim' /app/share/applications/org.vim.Vim.GVim.desktop"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/vim/vim",
          "tag": "v8.1.1137",
          "commit": "049736fa8af211886848d4a847b45d5d991c9687"
        },
        {
          "type": "file",
          "path": "org.vim.Vim.appdata.xml"
        },
        {
          "type": "file",
          "path": "vim64x64.png"
        },
        {
          "type": "file",
          "path": "vim128x128.png"
        },
        {
          "type": "patch",
          "path": "gvim.desktop-fix-translation-syntax.patch"
        }
      ]
    }
  ]
}
